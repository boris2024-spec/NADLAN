# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è API –≥–æ—Ä–æ–¥–æ–≤ –∏ —É–ª–∏—Ü –ò–∑—Ä–∞–∏–ª—è

## üéØ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π API –ø—Ä–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–∞ –ò–∑—Ä–∞–∏–ª—è (data.gov.il) –¥–ª—è –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏–π –≥–æ—Ä–æ–¥–æ–≤ –∏ —É–ª–∏—Ü –≤ —Ñ–æ—Ä–º–µ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏.

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 1. **–°–µ—Ä–≤–∏—Å API** 
`nadlan_front/src/services/citiesApi.js`
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö –≥–æ—Ä–æ–¥–æ–≤
- –ü–æ–∏—Å–∫ –≥–æ—Ä–æ–¥–æ–≤ –ø–æ –∑–∞–ø—Ä–æ—Å—É
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —É–ª–∏—Ü –ø–æ –≥–æ—Ä–æ–¥—É
- –ü–æ–∏—Å–∫ —É–ª–∏—Ü –ø–æ –∑–∞–ø—Ä–æ—Å—É
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ 24 —á–∞—Å–∞
- –ó–∞–ø–∞—Å–Ω–æ–π —Å–ø–∏—Å–æ–∫ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –≥–æ—Ä–æ–¥–æ–≤

### 2. **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è –≥–æ—Ä–æ–¥–æ–≤**
`nadlan_front/src/components/ui/CityAutocomplete.jsx`
- –ü–æ–∏—Å–∫ —Å debounce 300ms
- Dropdown —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
- –ö–ª–∞–≤–∏–∞—Ç—É—Ä–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –æ—à–∏–±–∫–∏

### 3. **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è —É–ª–∏—Ü**
`nadlan_front/src/components/ui/StreetAutocomplete.jsx`
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞
- –ü–æ–∏—Å–∫ —É–ª–∏—Ü –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º –≥–æ—Ä–æ–¥–µ
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤—ã–±–æ—Ä–∞ –≥–æ—Ä–æ–¥–∞

### 4. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**
- `CITIES_API_INTEGRATION.md` - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
- `CITIES_API_README.md` - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `CITIES_API_QUICKSTART.md` - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 5. **–¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞**
`test-cities-api.html` - HTML —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –í —Ñ–æ—Ä–º–µ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —É–∂–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ `CreatePropertyPage.jsx`:

**–í—ã–±–æ—Ä –≥–æ—Ä–æ–¥–∞:**
```jsx
<CityAutocomplete
    value={formData.location.city}
    onChange={(city) => handleInputChange({ 
        target: { 
            name: 'location.city', 
            value: city 
        } 
    })}
    placeholder="◊™◊ú ◊ê◊ë◊ô◊ë"
    error={!!validationErrors['location.city']}
    required
/>
```

**–í—ã–±–æ—Ä —É–ª–∏—Ü—ã (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≥–æ—Ä–æ–¥–∞):**
```jsx
<StreetAutocomplete
    value={formData.location.address}
    onChange={(street) => handleInputChange({ 
        target: { 
            name: 'location.address', 
            value: street 
        } 
    })}
    cityName={formData.location.city}
    placeholder="◊ì◊ô◊ñ◊†◊í◊ï◊£"
    error={!!validationErrors['location.address']}
    required
/>
```

### –í –¥—Ä—É–≥–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö

```jsx
import { CityAutocomplete, StreetAutocomplete } from '../components/ui';

function MyComponent() {
    const [city, setCity] = useState('');
    const [street, setStreet] = useState('');
    
    return (
        <>
            <CityAutocomplete
                value={city}
                onChange={setCity}
                placeholder="◊ë◊ó◊® ◊¢◊ô◊®"
                required
            />
            
            <StreetAutocomplete
                value={street}
                onChange={setStreet}
                cityName={city}
                placeholder="◊ë◊ó◊® ◊®◊ó◊ï◊ë"
                required
            />
        </>
    );
}
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **–¢–µ—Å—Ç API –Ω–∞–ø—Ä—è–º—É—é:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ `test-cities-api.html` –≤ –±—Ä–∞—É–∑–µ—Ä–µ
   - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤—Å–µ —Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏

2. **–¢–µ—Å—Ç –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:**
   ```bash
   cd nadlan_front
   npm run dev
   ```
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å–æ–∑–¥–∞–Ω–∏—è –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –∫ —à–∞–≥—É 2 (–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ)
   - –ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞ –≤ –ø–æ–ª–µ "◊¢◊ô◊®"

## üîç –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –í—ã–±–æ—Ä –≥–æ—Ä–æ–¥–∞:
1. **–í–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞—á–∏–Ω–∞–µ—Ç –≤–≤–æ–¥–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞
2. **Debounce**: –û–∂–∏–¥–∞–Ω–∏–µ 300ms –ø–µ—Ä–µ–¥ –∑–∞–ø—Ä–æ—Å–æ–º
3. **API –∑–∞–ø—Ä–æ—Å**: –ü–æ–∏—Å–∫ –≥–æ—Ä–æ–¥–æ–≤ —á–µ—Ä–µ–∑ data.gov.il API
4. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –Ω–∞ 24 —á–∞—Å–∞
5. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ**: Dropdown —Å –¥–æ 10 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
6. **–í—ã–±–æ—Ä**: –ö–ª–∏–∫ –∏–ª–∏ Enter –¥–ª—è –≤—ã–±–æ—Ä–∞ –≥–æ—Ä–æ–¥–∞

### –í—ã–±–æ—Ä —É–ª–∏—Ü—ã:
1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ä–æ–¥–∞**: –ü–æ–ª–µ –∞–∫—Ç–∏–≤–Ω–æ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω –≥–æ—Ä–æ–¥
2. **–í–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞—á–∏–Ω–∞–µ—Ç –≤–≤–æ–¥–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ —É–ª–∏—Ü—ã
3. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è**: –ü–æ–∏—Å–∫ —É–ª–∏—Ü —Ç–æ–ª—å–∫–æ –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–º –≥–æ—Ä–æ–¥–µ
4. **API –∑–∞–ø—Ä–æ—Å**: –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —É–ª–∏—Ü —á–µ—Ä–µ–∑ data.gov.il API
5. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –£–ª–∏—Ü—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≥–æ—Ä–æ–¥–∞ –∫—ç—à–∏—Ä—É—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ
6. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ**: Dropdown —Å –¥–æ 15 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
7. **–í—ã–±–æ—Ä**: –ö–ª–∏–∫ –∏–ª–∏ Enter –¥–ª—è –≤—ã–±–æ—Ä–∞ —É–ª–∏—Ü—ã

### üîß –ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤:

```bash
cd nadlan_back
node scripts/migrate-address-fields.mjs
```

–≠—Ç–æ —Ä–∞–∑–¥–µ–ª–∏—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∞–¥—Ä–µ—Å–∞ –Ω–∞ `street` –∏ `houseNumber`.

## üìä API –¥–∞–Ω–Ω—ã–µ

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏:** 
- –ì–æ—Ä–æ–¥–∞: –ú–∏–Ω–∏—Å—Ç–µ—Ä—Å—Ç–≤–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –¥–µ–ª –ò–∑—Ä–∞–∏–ª—è
- –£–ª–∏—Ü—ã: –ú–∏–Ω–∏—Å—Ç–µ—Ä—Å—Ç–≤–æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ –ò–∑—Ä–∞–∏–ª—è

**–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–æ–º  
**–ü–æ–∫—Ä—ã—Ç–∏–µ:** –í—Å–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –Ω–∞—Å–µ–ª–µ–Ω–Ω—ã–µ –ø—É–Ω–∫—Ç—ã –∏ —É–ª–∏—Ü—ã –ò–∑—Ä–∞–∏–ª—è

### API Endpoints:

**–ì–æ—Ä–æ–¥–∞:**
```
https://data.gov.il/api/3/action/datastore_search
  ?resource_id=5c78e9fa-c2e2-4771-93ff-7f400a12f7ba
```

**–£–ª–∏—Ü—ã:**
```
https://data.gov.il/api/3/action/datastore_search
  ?resource_id=e3674e3f-7f66-4b3b-a0c4-859b5d44b58e
  &filters={"◊©◊ù_◊ô◊©◊ï◊ë":"◊™◊ú ◊ê◊ë◊ô◊ë - ◊ô◊§◊ï"}
```

### –ü—Ä–∏–º–µ—Ä—ã –≥–æ—Ä–æ–¥–æ–≤:
- ◊™◊ú ◊ê◊ë◊ô◊ë - ◊ô◊§◊ï (–¢–µ–ª—å-–ê–≤–∏–≤ - –Ø—Ñ—Ñ–æ)
- ◊ô◊®◊ï◊©◊ú◊ô◊ù (–ò–µ—Ä—É—Å–∞–ª–∏–º)
- ◊ó◊ô◊§◊î (–•–∞–π—Ñ–∞)
- ◊ë◊ê◊® ◊©◊ë◊¢ (–ë–µ—ç—Ä-–®–µ–≤–∞)
- ◊®◊ê◊©◊ï◊ü ◊ú◊¶◊ô◊ï◊ü (–†–∏—à–æ–Ω-–ª–µ-–¶–∏–æ–Ω)
- –ò –º–Ω–æ–≥–∏–µ –¥—Ä—É–≥–∏–µ...

## ‚ö° –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- ‚úÖ –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –±—ã—Å—Ç—Ä–æ–¥–µ–π—Å—Ç–≤–∏—è
- ‚úÖ –ó–∞–ø–∞—Å–Ω–æ–π —Å–ø–∏—Å–æ–∫ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ RTL (–∏–≤—Ä–∏—Ç)
- ‚úÖ –¢–µ–º–Ω–∞—è —Ç–µ–º–∞
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è
- ‚úÖ –ö–ª–∞–≤–∏–∞—Ç—É—Ä–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω
- ‚úÖ –ë–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (—Ç–æ–ª—å–∫–æ React)

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∏

### –ò–∑–º–µ–Ω–∏—Ç—å –≤—Ä–µ–º—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

–í `citiesApi.js`:
```javascript
const CACHE_DURATION = 24 * 60 * 60 * 1000; // 24 —á–∞—Å–∞ (–≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö)
```

### –ò–∑–º–µ–Ω–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É –ø–æ–∏—Å–∫–∞

–í `CityAutocomplete.jsx`:
```javascript
setTimeout(async () => {
    // –ø–æ–∏—Å–∫
}, 300); // 300ms
```

### –ò–∑–º–µ–Ω–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–í `citiesApi.js`:
```javascript
.slice(0, 10); // –ú–∞–∫—Å–∏–º—É–º 10 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
```

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫—ç—à
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
import { getAllCities } from './services/citiesApi';
const cities = await getAllCities();
console.log(cities);
```

### –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à
–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç–µ `CACHE_DURATION`

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- API –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –õ–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤: —Ä–∞–∑—É–º–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ (–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–º–æ–≥–∞–µ—Ç)
- –ï—Å–ª–∏ API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–∞–ø–∞—Å–Ω–æ–π —Å–ø–∏—Å–æ–∫ –∏–∑ 60+ –≥–æ—Ä–æ–¥–æ–≤

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Data.gov.il API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://data.gov.il/dataset/citiesandsettelments)
- [CKAN API Guide](https://docs.ckan.org/en/2.9/api/)
- –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞: `https://data.gov.il/api/3/action/datastore_search?resource_id=5c78e9fa-c2e2-4771-93ff-7f400a12f7ba&limit=10`
